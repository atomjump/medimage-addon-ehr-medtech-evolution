{
	"photoPathMatch": "(.*)\\\\(.*)\\\\(.*).jpg",
	"photoVars": ["parentphotodir", "NHID", "photoname"],
	"testConnectionSQL": "SELECT TOP(1) * FROM ATTACHMENTSMGR ORDER BY ID DESC;",
	"testConnectionShowField": "PathToFile",
	"createUserSQL": "GRANT INSERT ON ATTACHMENTSMGR TO MEDIMAGE; GRANT SELECT ON PATIENT TO MEDIMAGE;",	
	"getIdSQL": "SELECT ID AS PATIENTID FROM PATIENT WHERE PATIENT.ISPATIENT = 1 AND PATIENT.NHI = '[NHID]';",
	"insertAttachmentSQL": "INSERT INTO ATTACHMENTSMGR (EntityId, WhenAdded, Description, PathToFile, Note, FileSize,RowInactive, RowInsertComp, RowInsertUserId, RowInsertWhen, RowUpdateUserId, RowInsertLocationId,RowUpdateLocationId, RowUpdateWhen, RowUpdateComp, CreatedComputerId, CreatedBy, CreatedAt, CreatedLocationId,ModifiedComputerId, ModifiedBy, ModifiedAt,ModifiedLocationId,IsActive, Type,Author) VALUES('[patientID]','[currentDateTime]','MedImage Photo', '[fullphotopath]','[photoname]',[filelength],0,'[computer]','[staffname]','[currentDateTime]','[staffname]','[location]','[location]','[currentDateTime]','[computer]',1,1,'[currentDateTime]',1,1,1,'[currentDateTime]',1,1,NULL,'[staffname]');",
	"host": "localhost",
	"dbname": "consult",
	"username": "sysuser",
	"password": "masterkey",
	"staffname": "MedImage",
	"computer": "Main",
	"localFolderMapDown": "C:\\mt32",
	"location": "M:\\",
	"useResized": false,
	"parentPhotoDir": "C:\\MEDTECH\\Attachments",
	"useODBC": true,
	"dsnHere": "medtech-evolution",
	"logging": true,
	"capitaliseNHID": true,
	"dbCurrentTimeSQL": "CURRENT_TIMESTAMP",
	"constraints": {
		"patientID": 20,
		"photoName": 100,
		"staffname": 20,
		"computer": 20,
		"location": 20,
		"fullphotopath": 255	
	},
	"createUserHelp": "<p>You can do this by creating a Windows user, or from within your SQL Server Management Studio, depending on your SQL Server set-up.</p><p>To do this with a <i>Windows user</i>:</p><p>1. Go into Windows/Settings/Accounts and create a new user called 'MEDIMAGE'. Bring up your Management Studio and connect to the database (typically with your original user)</p><p>2. Enter Database/Security/Login. Right click/Properties on the MEDIMAGE user. Click 'User Mapping' and tick your MedTech Evolution system. Assign db_datareader and db_datawriter permission for that user.</p><p>3. Click the 'Switch to MEDIMAGE user' button below.</p>",
	"createUserHelpFull": "<p>You can do this <b>manually</b> in your SQL Server Management Studio or by creating a new Windows user called 'MEDIMAGE'. After a successful connection using the system user, above, you will be <b>given an option</b> to switch to the MEDIMAGE user (which will give permissions to that user also).</p><p>To do this <i>manually</i>:</p><p>1. Bring up your SQL console and connect to your SQL database (typically with the system login and password)</p><p>2. Run similar SQL queries to the following:</p><pre>CREATE USER \"YourServer\\MEDIMAGE\"; GRANT INSERT ON ATTACHMENTSMGR TO \"YourServer\\MEDIMAGE\"; GRANT SELECT ON PATIENT TO \"YourServer\\MEDIMAGE\" ;</pre><p>3. Set the username to 'MEDIMAGE' above.</p>" 
}
